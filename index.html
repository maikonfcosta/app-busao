<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Calculadora – Busão</title>
<link rel="stylesheet" href="css/style.css" />
</head>
<body>
<div class="wrap">
  <div class="panel">
    <header><h1>Configuração</h1><small id="playerTag"></small></header>

    <div class="section">
      <label>Jogador</label>
      <input id="playerName" placeholder="Nome do jogador" />
    </div>

    <div class="section">
      <label>Motorista</label>
      <select id="driver"></select>
      <div id="driverInfo" class="drivers" style="margin-top:10px"></div>
      <div class="inline">
        <input type="checkbox" id="expCobradores" />
        <label for="expCobradores" style="margin:0">Ativar Expansão COBRADORES</label>
      </div>
    </div>

    <div class="section">
      <label>Melhorias (até 3, sem repetir)</label>
      <div class="improvements">
        <select class="improv"></select>
        <select class="improv"></select>
        <select class="improv"></select>
      </div>
      <div id="improvInfo" class="drivers" style="margin-top:10px"></div>
      <div class="chips" style="margin-top:8px">
        <span class="chip">Dona Fausta no busão → melhorias não pontuam.</span>
      </div>
    </div>

    <div class="section">
      <label>Cartas na mão (–1 cada)</label>
      <input id="handCount" type="number" min="0" step="1" value="0" />
    </div>

    <div class="section">
      <label>Ações</label>
      <div class="bar">
        <button class="btn acc" id="btnClearSeats">Limpar assentos</button>
        <button class="btn ghost" id="btnNewRound">Nova pontuação</button>
      </div>
    </div>

    <div class="section">
      <label>Salvar no Ranking</label>
      <div class="bar" style="margin-bottom:8px">
        <button class="btn accent" id="btnSaveScore">Salvar pontuação</button>
        <button class="btn warn" id="btnResetRanking">Zerar ranking</button>
      </div>
      <div class="muted">Pontuações salvas no seu navegador (localStorage).</div>
    </div>

    <div class="foot">Lista oficial de cartas e efeitos.</div>
  </div>

  <div class="panel">
    <header style="justify-content:space-between;width:100%">
      <div>
        <h1>Busão (assentos 1–12)</h1>
        <small>Escolha a carta conforme o assento.</small>
      </div>
      <div class="bar">
        <button class="btn" id="btnRules">Ler as regras</button>
        <button class="btn" id="btnFaq">FAQ & Contato</button>
      </div>
    </header>

    <div class="section">
      <div class="section-title">
        Onde ficam os assentos (Ajuda Visual)
        <button id="btnVisualHelp" class="btn ghost sm" title="Ajuda de adjacência">?</button>
      </div>
      <div class="section-sub">Motorista à esquerda • fileira de cima: 1–6 • fileira de baixo: 7–12.</div>
      <div id="visualHelp" class="popover">
        <b>Adjacência:</b> esquerda/direita, encima/embaixo, Diagonais. Ex.: Assento 3 → adjacentes: 2, 4, 8, 9, 10.
      </div>

      <div id="busVisual" class="bus-visual">
        <div class="driver"><div class="label">motorista</div></div>
        <div class="wheel w1"></div><div class="wheel w2"></div>
        <div class="seats" id="busVisualSeats"></div>
      </div>
    </div>

    <div class="grid" id="grid"></div>

    <div class="section"><div class="chips"><span class="chip">Adjacências Válidas – ortogonais e diagonais</span></div></div>

    <div class="section">
      <div class="tabs"><div class="tab act" data-t="regras">Regras (online)</div><div class="tab" data-t="faq">FAQ & Contato</div></div>
      <div class="tabpan act" id="tab-regras">
        <p><b>Resumo rápido</b></p>
        <ul><li>Objetivo: somar pontos com passageiros + motorista + melhorias.</li><li>Fim: Fim da Linha, Busão lotado ou fim das cartas da rua.</li><li>Pontuação: passageiros (efeitos), motorista (+1 por tags), melhorias (+1 por tags) e –1 por carta na mão.</li></ul>
      </div>
      <div class="tabpan" id="tab-faq">
        <p><b>Perguntas frequentes</b></p>
        <details open><summary>Como funciona a adjacência?</summary><div class="muted">Esquerda/direita + 3 da outra fileira (motorista não conta).</div></details>
        <details><summary>“Entre ele e o motorista” (Motolover)</summary><div class="muted">Conta todos nas colunas à esquerda (duas fileiras).</div></details>
        <details><summary>Cartas na mão descontam?</summary><div class="muted">Sim, –1 por carta restante.</div></details>
        <p style="margin-top:10px">Contato: <a href="mailto:contato@busao.game">contato@busao.game</a> • <a href="https://wa.me/5500000000000" target="_blank" rel="noopener">WhatsApp</a></p>
      </div>
    </div>
  </div>

  <div class="panel">
    <header><h1>Resultado</h1><small>ao vivo</small></header>
    <div class="section totals">
      <div class="total"><h3>Total</h3><div id="totalScore" class="v kpi neu">0</div><div id="warnings" class="muted" style="margin-top:6px"></div></div>
      <div class="total"><h3>Quebra</h3><div class="muted">Passageiros: <b id="sumPassengers">0</b></div><div class="muted">Motorista: <b id="sumDriver">0</b></div><div class="muted">Melhorias: <b id="sumImprov">0</b></div><div class="muted">Mão: <b id="sumHand">0</b></div></div>
    </div>
    <div class="section" style="padding-top:8px"><label>Explicação por assento</label><div id="explain" class="explain"></div></div>
    <div class="section">
      <label>Ranking</label>
      <table id="rankTable"><thead><tr><th>#</th><th>Jogador</th><th>Motorista</th><th>Melhorias</th><th class="right">Pontuação</th></tr></thead><tbody></tbody></table>
    </div>
    <div class="foot">Motorista e melhorias: +1 por ocorrência das subcategorias descritas.</div>
  </div>
</div>

<script src="js/main.js"></script>
</body>
</html>